!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n=n||self).Tonal=t()}(this,function(){"use strict";var n={tokenize:u,props:c,name:f,names:t,pc:P,oct:g,chroma:_,midi:h,freq:M,fromMidi:T,freqToMidi:y,altToAcc:E,stepToLetter:j,fromProps:x,simplify:S,enharmonic:C},e="C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B".split(" ");function t(t){return void 0===t&&(t={}),e.filter(function(n){return!1!==t.unaltered&&void 0===n[1]||!0===t.flats&&"b"===n[1]||!0===t.sharps&&"#"===n[1]})}var r=t({sharps:!0}),i=t({flats:!0}),o=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function u(n){"string"!=typeof n&&(n="");var t=o.exec(n);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:null}var a=Object.freeze({pc:null,name:null,step:null,alt:null,oct:null,octStr:null,chroma:null,midi:null,freq:null}),l=[0,2,4,5,7,9,11],s=function(n){var t=u(n);if(""===t[0]||""!==t[3])return a;var e=t[0],r=t[1],i=t[2],o={letter:e,acc:r,octStr:i};return o.pc=o.letter+o.acc,o.name=o.pc+i,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt="b"===o.acc[0]?-o.acc.length:o.acc.length,o.oct=i.length?+i:null,o.chroma=(l[o.step]+o.alt+120)%12,o.midi=null!==o.oct?l[o.step]+o.alt+12*(o.oct+1):null,o.freq=d(o.midi),Object.freeze(o)},m={};function c(n){return m[n]||(m[n]=s(n))}function f(n){return c(n).name}function P(n){return c(n).pc}var p=function(n){return 0<=n&&n<=127};function h(n){if("number"!=typeof n&&"string"!=typeof n)return null;var t=c(n).midi,e=t||0===t?t:+n;return p(e)?e:null}var d=function(n,t){return void 0===t&&(t=440),"number"==typeof n?Math.pow(2,(n-69)/12)*t:null};function M(n){return c(n).freq||d(n)}var v=Math.log(2),b=Math.log(440);function y(n){var t=12*(Math.log(n)-b)/v+69;return Math.round(100*t)/100}function _(n){return c(n).chroma}function g(n){return c(n).oct}var A="CDEFGAB";function j(n){return A[n]}var w=function(n,t){return Array(t+1).join(n)},O=function(n,t){return"number"!=typeof n?"":t(n)};function E(n){return O(n,function(n){return n<0?w("b",-n):w("#",n)})}function x(n,t){void 0===n&&(n={}),void 0===t&&(t=null);var e=t?Object.assign({},c(t),n):n,r=e.step,i=e.alt,o=e.oct,u=j(r);if(!u)return null;var a=u+E(i);return o||0===o?a+o:a}function T(n,t){void 0===t&&(t={}),n=Math.round(n);var e=(!0===t.sharps?r:i)[n%12];return t.pitchClass?e:e+(Math.floor(n/12)-1)}function S(n,t){void 0===t&&(t={});var e=c(n),r=e.alt,i=e.chroma,o=e.midi;return null===i?null:T(o||i,{sharps:!1===t.sameAccType?r<0:0<r,pitchClass:null===o})}function C(n){return S(n,!1)}var k=Object.freeze({default:n,names:t,tokenize:u,props:c,name:f,pc:P,midi:h,midiToFreq:d,freq:M,freqToMidi:y,chroma:_,oct:g,stepToLetter:j,altToAcc:E,fromProps:x,fromMidi:T,simplify:S,enharmonic:C}),z=Array.isArray,I={range:q,rotate:F,compact:D,sort:V,sortedUniq:U,shuffle:B,permutations:$};function R(n,t){if(void 0===t&&(t="Must be an array."),!z(n))throw Error(t+" Was: "+n)}function q(n,t){return null===n||null===t?[]:n<t?function(n,t){for(var e=[];t--;e[t]=t+n);return e}(n,t-n+1):function(n,t){for(var e=[];t--;e[t]=n-t);return e}(n,n-t+1)}function F(n,t){var e=t.length,r=(n%e+e)%e;return t.slice(r,e).concat(t.slice(0,r))}function D(n){return n.filter(function(n){return 0===n||n})}var N=function(n){var t=c(n).midi;return null!==t?t:c(n+"-100").midi};function V(n){return D(n.map(f)).sort(function(n,t){return N(n)>N(t)})}function U(n){return V(n).filter(function(n,t,e){return 0===t||n!==e[t-1]})}function B(n,t){var e,r;void 0===t&&(t=Math.random);for(var i=n.length;i;)e=t()*i--|0,r=n[i],n[i]=n[e],n[e]=r;return n}function $(i){return 0===i.length?[[]]:$(i.slice(1)).reduce(function(n,r){return n.concat(i.map(function(n,t){var e=r.slice();return e.splice(t,0,i[0]),e}))},[])}var G=Object.freeze({default:I,assert:R,range:q,rotate:F,compact:D,sort:V,sortedUniq:U,shuffle:B,permutations:$}),L={tokenize:X,props:un,simplify:Pn,invert:pn,names:Q,num:an,name:ln,fromProps:fn,chroma:mn,ic:cn,semitones:sn,fromSemitones:Mn},K=new RegExp("^([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})|(AA|A|P|M|m|d|dd)([-+]?\\d+)$"),W=[0,2,4,5,7,9,11],Y="PMMPPMM",H=[0,1,2,3,4,5,6,5,4,3,2,1],J="1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P".split(" ");function Q(t){return"string"!=typeof t?J.slice():J.filter(function(n){return-1!==t.indexOf(n[1])})}function X(n){var t=K.exec(n);return null===t?null:t[1]?[t[1],t[2]]:[t[4],t[3]]}var Z=Object.freeze({name:null,num:null,q:null,step:null,alt:null,dir:null,type:null,simple:null,semitones:null,chroma:null}),nn=function(n,t){return Array(Math.abs(t)+1).join(n)},tn=function(n,t){return 0===t?"M"===n?"M":"P":-1===t&&"M"===n?"m":0<t?nn("A",t):t<0?nn("d","P"===n?t:t+1):null},en=function(n){return(Math.abs(n)-1)%7},rn=function(n){var t=X(n);if(null===t)return Z;var e,r,i={num:+t[0],q:t[1]};return i.step=en(i.num),i.type=Y[i.step],"M"===i.type&&"P"===i.q?Z:(i.name=""+i.num+i.q,i.dir=i.num<0?-1:1,i.simple=8===i.num||-8===i.num?i.num:i.dir*(i.step+1),i.alt=(e=i.type,"M"===(r=i.q)&&"M"===e?0:"P"===r&&"P"===e?0:"m"===r&&"M"===e?-1:/^A+$/.test(r)?r.length:/^d+$/.test(r)?"P"===e?-r.length:-r.length-1:null),i.oct=Math.floor((Math.abs(i.num)-1)/7),i.semitones=i.dir*(W[i.step]+i.alt+12*i.oct),i.chroma=(i.dir*(W[i.step]+i.alt)%12+12)%12,Object.freeze(i))},on={};function un(n){return"string"!=typeof n?Z:on[n]||(on[n]=rn(n))}function an(n){return un(n).num}function ln(n){return un(n).name}function sn(n){return un(n).semitones}function mn(n){return un(n).chroma}function cn(n){return"string"==typeof n&&(n=un(n).chroma),"number"==typeof n?H[n%12]:null}function fn(n){void 0===n&&(n={});var t=n.num,e=n.step,r=n.alt,i=n.oct;void 0===i&&(i=1);var o=n.dir;if(void 0!==e&&(t=e+1+7*i),void 0===t)return null;var u=o<0?"-":"",a=Y[en(t)];return u+t+tn(a,r)}function Pn(n){var t=un(n);return t===Z?null:t.simple+t.q}function pn(n){var t=un(n);return t===Z?null:fn({step:(7-t.step)%7,alt:"P"===t.type?-t.alt:-(t.alt+1),oct:t.oct,dir:t.dir})}var hn=[1,2,2,3,3,4,5,5,6,6,7,7],dn="P m M m M P d P m M m M".split(" ");function Mn(n){var t=n<0?-1:1,e=Math.abs(n),r=e%12,i=Math.floor(e/12);return t*(hn[r]+7*i)+dn[r]}var vn=Object.freeze({default:L,names:Q,tokenize:X,props:un,num:an,name:ln,semitones:sn,chroma:mn,ic:cn,fromProps:fn,simplify:Pn,invert:pn,fromSemitones:Mn}),bn={transpose:En,transposeBy:Sn,add:zn,subtract:In,interval:Rn,semitones:qn,fifths:Tn,trFifths:xn},yn=[0,2,4,-1,1,3,5],_n=yn.map(function(n){return Math.floor(7*n/12)}),gn=[3,0,4,1,5,2,6];var An=function(n,t,e){var r,i,o=gn[(r=n,i=(r+1)%7,i<0?7+i:i)],u=Math.floor((n+1)/7);return void 0===t?{step:o,alt:u,dir:e}:{step:o,alt:u,oct:t+4*u+_n[o],dir:e}},jn=function(e){return t=function(n){var t=e(n);return null===t.name?null:function(n){var t=n.step,e=n.alt,r=n.oct,i=n.dir;void 0===i&&(i=1);var o=yn[t]+7*e;return null===r?[i*o]:[i*o,i*(r-_n[t]-4*e)]}(t)},void 0===r&&(r={}),function(n){return r[n]||(r[n]=t(n))};var t,r},wn=jn(c),On=jn(un);function En(t,n){if(1===arguments.length)return function(n){return En(t,n)};var e=wn(t),r=On(n);if(null===e||null===r)return null;var i=1===e.length?[e[0]+r[0]]:[e[0]+r[0],e[1]+r[1]];return x(An(i[0],i[1]))}function xn(t,n){if(1===arguments.length)return function(n){return xn(t,n)};var e=wn(t);return null===e?null:x(An(e[0]+n))}function Tn(t,n){if(1===arguments.length)return function(n){return Tn(t,n)};var e=wn(t),r=wn(n);return null===r||null===e?null:r[0]-e[0]}function Sn(t,n){return 1===arguments.length?function(n){return En(n,t)}:En(n,t)}var Cn=function(n){return 7*(t=n)[0]+12*t[1]<0?An(-n[0],-n[1],-1):An(n[0],n[1],1);var t};function kn(n,t,e){var r=On(n),i=On(t);if(null===r||null===i)return null;var o=[r[0]+e*i[0],r[1]+e*i[1]];return fn(Cn(o))}function zn(t,n){return 1===arguments.length?function(n){return zn(t,n)}:kn(t,n,1)}function In(t,n){return 1===arguments.length?function(n){return zn(t,n)}:kn(t,n,-1)}function Rn(t,n){if(1===arguments.length)return function(n){return Rn(t,n)};var e=wn(t),r=wn(n);if(null===e||null===r||e.length!==r.length)return null;var i=1===e.length?[r[0]-e[0],-Math.floor(7*(r[0]-e[0])/12)]:[r[0]-e[0],r[1]-e[1]];return fn(Cn(i))}function qn(t,n){if(1===arguments.length)return function(n){return qn(t,n)};var e=c(t),r=c(n);return null!==e.midi&&null!==r.midi?r.midi-e.midi:null!==e.chroma&&null!==r.chroma?(r.chroma-e.chroma+12)%12:null}var Fn=Object.freeze({default:bn,transpose:En,trFifths:xn,fifths:Tn,transposeBy:Sn,addIntervals:kn,add:zn,subtract:In,interval:Rn,semitones:qn}),Dn=[["1P 3M 5P","major","M "],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth/ninth","6/9 69"],["1P 3M 5P 7M 11A","lydian","maj#4 Δ#4 Δ#11"],["1P 3M 6m 7M","major seventh b6","M7b6"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 m/M7 -Δ7 mΔ"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 m/M7 -Δ7 mΔ"],["1P 3m 5P 6M","minor sixth","m6"],["1P 3m 5P 7m 9M","minor ninth","m9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant b9","7b9"],["1P 3M 5P 7m 9A","dominant #9","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended 4th","sus4"],["1P 2M 5P","suspended 2nd","sus2"],["1P 4P 5P 7m","suspended 4th seventh","7sus4"],["1P 5P 7m 9M 11P","eleventh","11 sus Bb/C for C11"],["1P 4P 5P 7m 9m","suspended 4th b9","b9sus phryg"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5"],["1P 3M 5P 7M 9M 11A","major #11 (lydian)","maj9#11 Δ9#11"],["1P 3M 5P 7m 9A","dominant #9","7#9"],["1P 2M 4P 5P",null,"sus24 sus4add9"],["1P 3M 13m",null,"Mb6"],["1P 3M 5A 7M 9M",null,"M9#5 Maj9#5"],["1P 3M 5A 7m",null,"7#5 +7 7aug aug7"],["1P 3M 5A 7m 9A",null,"7#5#9 7alt 7#5#9_ 7#9b13_"],["1P 3M 5A 7m 9M",null,"9#5 9+"],["1P 3M 5A 7m 9M 11A",null,"9#5#11"],["1P 3M 5A 7m 9m",null,"7#5b9"],["1P 3M 5A 7m 9m 11A",null,"7#5b9#11"],["1P 3M 5A 9A",null,"+add#9"],["1P 3M 5A 9M",null,"M#5add9 +add9"],["1P 3M 5P 6M 11A",null,"M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M",null,"M7add13"],["1P 3M 5P 6M 9M 11A",null,"69#11"],["1P 3M 5P 6m 7m",null,"7b6"],["1P 3M 5P 7M 9A 11A",null,"Maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M",null,"M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m",null,"M7b9"],["1P 3M 5P 7m 11A 13m",null,"7#11b13 7b5b13"],["1P 3M 5P 7m 13M",null,"7add6 67 7add13"],["1P 3M 5P 7m 9A 11A",null,"7#9#11 7b5#9"],["1P 3M 5P 7m 9A 11A 13M",null,"13#9#11"],["1P 3M 5P 7m 9A 11A 13m",null,"7#9#11b13"],["1P 3M 5P 7m 9A 13M",null,"13#9 13#9_"],["1P 3M 5P 7m 9A 13m",null,"7#9b13"],["1P 3M 5P 7m 9M 11A",null,"9#11 9+4 9#4 9#11_ 9#4_"],["1P 3M 5P 7m 9M 11A 13M",null,"13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m",null,"9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A",null,"7b9#11 7b5b9"],["1P 3M 5P 7m 9m 11A 13M",null,"13b9#11"],["1P 3M 5P 7m 9m 11A 13m",null,"7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M",null,"13b9"],["1P 3M 5P 7m 9m 13m",null,"7b9b13"],["1P 3M 5P 7m 9m 9A",null,"7b9#9"],["1P 3M 5P 9M",null,"Madd9 2 add9 add2"],["1P 3M 5P 9m",null,"Maddb9"],["1P 3M 5d",null,"Mb5"],["1P 3M 5d 6M 7m 9M",null,"13b5"],["1P 3M 5d 7M",null,"M7b5"],["1P 3M 5d 7M 9M",null,"M9b5"],["1P 3M 5d 7m",null,"7b5"],["1P 3M 5d 7m 9M",null,"9b5"],["1P 3M 7m",null,"7no5"],["1P 3M 7m 13m",null,"7b13"],["1P 3M 7m 9M",null,"9no5"],["1P 3M 7m 9M 13M",null,"13no5"],["1P 3M 7m 9M 13m",null,"9b13"],["1P 3m 4P 5P",null,"madd4"],["1P 3m 5A",null,"m#5 m+ mb6"],["1P 3m 5P 6M 9M",null,"m69 _69"],["1P 3m 5P 6m 7M",null,"mMaj7b6 mM7b6"],["1P 3m 5P 6m 7M 9M",null,"mM9b6 mMaj9b6"],["1P 3m 5P 7M 9M",null,"mM9 mMaj9 -M9"],["1P 3m 5P 7m 11P",null,"m7add11 m7add4"],["1P 3m 5P 9M",null,"madd9"],["1P 3m 5d 6M 7M",null,"o7M7"],["1P 3m 5d 7M",null,"oM7"],["1P 3m 5d 7m",null,"m7b5 half-diminished h7 _7b5"],["1P 3m 6m 7M",null,"mb6M7"],["1P 3m 6m 7m",null,"m7#5"],["1P 3m 6m 7m 9M",null,"m9#5"],["1P 3m 6m 7m 9M 11P",null,"m11A"],["1P 3m 6m 9m",null,"mb6b9"],["1P 3m 7m 12d 2M",null,"m9b5 h9 -9b5"],["1P 3m 7m 12d 2M 4P",null,"m11b5 h11 _11b5"],["1P 4P 5A 7M",null,"M7#5sus4"],["1P 4P 5A 7M 9M",null,"M9#5sus4"],["1P 4P 5A 7m",null,"7#5sus4"],["1P 4P 5P 7M",null,"M7sus4"],["1P 4P 5P 7M 9M",null,"M9sus4"],["1P 4P 5P 7m 9M",null,"9sus4 9sus"],["1P 4P 5P 7m 9M 13M",null,"13sus4 13sus"],["1P 4P 5P 7m 9m 13m",null,"7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m",null,"4 quartal"],["1P 5P 7m 9m 11P",null,"11b9"]],Nn={chroma:Bn,chromas:Gn,isChroma:Wn,intervals:Hn,isSubsetOf:Qn,isSupersetOf:Xn,isEqual:Jn,modes:Ln,includes:Zn,filter:nt},Vn=function(n){return parseInt(Bn(n),2)},Un=function(n){return n.replace(/0/g,"").length};function Bn(n){if(Wn(n))return n;var t;R(n);for(var e=[0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<n.length;r++){if(null===(t=_(n[r]))&&(t=mn(n[r])),null===t)return null;e[t]=1}return e.join("")}var $n=null;function Gn(t){return $n=$n||q(2048,4095).map(function(n){return n.toString(2)}),"number"==typeof t?$n.filter(function(n){return Un(n)===t}):$n.slice()}function Ln(n,r){r=!1!==r;var i=(Bn(n)||"").split("");return D(i.map(function(n,t){var e=F(t,i);return r&&"0"===e[0]?null:e.join("")}))}var Kn=/^[01]{12}$/;function Wn(n){return Kn.test(n)}var Yn="1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M".split(" ");function Hn(n){return Wn(n)?D(n.split("").map(function(n,t){return"1"===n?Yn[t]:null})):[]}function Jn(t,n){return 1===arguments.length?function(n){return Jn(t,n)}:Bn(t)===Bn(n)}function Qn(t,n){return 1<arguments.length?Qn(t)(n):(t=Vn(t),function(n){return(n=Vn(n))!==t&&(n&t)===n})}function Xn(t,n){return 1<arguments.length?Xn(t)(n):(t=Vn(t),function(n){return(n=Vn(n))!==t&&(n|t)===n})}function Zn(t,n){return 1<arguments.length?Zn(t)(n):(t=Bn(t),function(n){return"1"===t[_(n)]})}function nt(t,n){return 1===arguments.length?function(n){return nt(t,n)}:n.filter(Zn(t))}var tt=Object.freeze({default:Nn,chroma:Bn,chromas:Gn,modes:Ln,isChroma:Wn,intervals:Hn,isEqual:Jn,isSubsetOf:Qn,isSupersetOf:Xn,includes:Zn,filter:nt});function et(n){var t=n._promiseCallbacks;return t||(t=n._promiseCallbacks={}),t}var rt={mixin:function(n){return n.on=this.on,n.off=this.off,n.trigger=this.trigger,n._promiseCallbacks=void 0,n},on:function(n,t){if("function"!=typeof t)throw new TypeError("Callback must be a function");var e=et(this),r=void 0;(r=e[n])||(r=e[n]=[]),r.indexOf(t)&&r.push(t)},off:function(n,t){var e,r=et(this),i=void 0;t?-1!==(e=(i=r[n]).indexOf(t))&&i.splice(e,1):r[n]=[]},trigger:function(n,t,e){var r;if(r=et(this)[n])for(var i=0;i<r.length;i++)(0,r[i])(t,e)}},it={instrument:!1};function ot(n,t){if(2!==arguments.length)return it[n];it[n]=t}rt.mixin(it);var ut=[];function at(n,t,e){1===ut.push({name:n,payload:{key:t._guidKey,id:t._id,eventName:n,detail:t._result,childId:e&&e._id,label:t._label,timeStamp:Date.now(),error:it["instrument-with-stack"]?new Error(t._label):null}})&&setTimeout(function(){for(var n=0;n<ut.length;n++){var t=ut[n],e=t.payload;e.guid=e.key+e.id,e.childGuid=e.key+e.childId,e.error&&(e.stack=e.error.stack),it.trigger(t.name,t.payload)}ut.length=0},50)}function lt(n,t){if(n&&"object"==typeof n&&n.constructor===this)return n;var e=new this(st,t);return bt(e,n),e}function st(){}var mt=void 0,ct=1,ft=2,Pt={error:null};function pt(n){try{return n.then}catch(n){return Pt.error=n,Pt}}var ht=void 0;function dt(){try{var n=ht;return ht=null,n.apply(this,arguments)}catch(n){return Pt.error=n,Pt}}function Mt(n){return ht=n,dt}function vt(n,t,e){var r,i,o,u,a;if(t.constructor===n.constructor&&e===Ot&&n.constructor.resolve===lt)u=n,(a=t)._state===ct?_t(u,a._result):a._state===ft?(a._onError=null,gt(u,a._result)):At(a,void 0,function(n){a===n?_t(u,n):bt(u,n)},function(n){return gt(u,n)});else if(e===Pt){var l=Pt.error;Pt.error=null,gt(n,l)}else"function"==typeof e?(r=n,i=t,o=e,it.async(function(t){var e=!1,n=Mt(o).call(i,function(n){e||(e=!0,i===n?_t(t,n):bt(t,n))},function(n){e||(e=!0,gt(t,n))},"Settle: "+(t._label||" unknown promise"));if(!e&&n===Pt){e=!0;var r=Pt.error;Pt.error=null,gt(t,r)}},r)):_t(n,t)}function bt(n,t){var e,r;n===t?_t(n,t):(r=typeof(e=t),null===e||"object"!==r&&"function"!==r?_t(n,t):vt(n,t,pt(t)))}function yt(n){n._onError&&n._onError(n._result),jt(n)}function _t(n,t){n._state===mt&&(n._result=t,n._state=ct,0===n._subscribers.length?it.instrument&&at("fulfilled",n):it.async(jt,n))}function gt(n,t){n._state===mt&&(n._state=ft,n._result=t,it.async(yt,n))}function At(n,t,e,r){var i=n._subscribers,o=i.length;n._onError=null,i[o]=t,i[o+ct]=e,i[o+ft]=r,0===o&&n._state&&it.async(jt,n)}function jt(n){var t=n._subscribers,e=n._state;if(it.instrument&&at(e===ct?"fulfilled":"rejected",n),0!==t.length){for(var r=void 0,i=void 0,o=n._result,u=0;u<t.length;u+=3)r=t[u],i=t[u+e],r?wt(e,r,i,o):i(o);n._subscribers.length=0}}function wt(n,t,e,r){var i="function"==typeof e,o=void 0;if(o=i?Mt(e)(r):r,t._state!==mt);else if(o===t)gt(t,new TypeError("A promises callback cannot return that same promise."));else if(o===Pt){var u=Pt.error;Pt.error=null,gt(t,u)}else i?bt(t,o):n===ct?_t(t,o):n===ft&&gt(t,o)}function Ot(n,t,e){var r=this,i=r._state;if(i===ct&&!n||i===ft&&!t)return it.instrument&&at("chained",r,r),r;r._onError=null;var o=new r.constructor(st,e),u=r._result;if(it.instrument&&at("chained",r,o),i===mt)At(r,o,n,t);else{var a=i===ct?n:t;it.async(function(){return wt(i,o,a,u)})}return o}var Et=function(){function n(n,t,e,r){this._instanceConstructor=n,this.promise=new n(st,r),this._abortOnReject=e,this._isUsingOwnPromise=n===Ct,this._isUsingOwnResolve=n.resolve===lt,this._init.apply(this,arguments)}return n.prototype._init=function(n,t){var e=t.length||0;this.length=e,this._remaining=e,this._result=new Array(e),this._enumerate(t)},n.prototype._enumerate=function(n){for(var t=this.length,e=this.promise,r=0;e._state===mt&&r<t;r++)this._eachEntry(n[r],r,!0);this._checkFullfillment()},n.prototype._checkFullfillment=function(){0===this._remaining&&_t(this.promise,this._result)},n.prototype._settleMaybeThenable=function(t,n,e){var r=this._instanceConstructor;if(this._isUsingOwnResolve){var i=pt(t);if(i===Ot&&t._state!==mt)t._onError=null,this._settledAt(t._state,n,t._result,e);else if("function"!=typeof i)this._settledAt(ct,n,t,e);else if(this._isUsingOwnPromise){var o=new r(st);vt(o,t,i),this._willSettleAt(o,n,e)}else this._willSettleAt(new r(function(n){return n(t)}),n,e)}else this._willSettleAt(r.resolve(t),n,e)},n.prototype._eachEntry=function(n,t,e){null!==n&&"object"==typeof n?this._settleMaybeThenable(n,t,e):this._setResultAt(ct,t,n,e)},n.prototype._settledAt=function(n,t,e,r){var i=this.promise;i._state===mt&&(this._abortOnReject&&n===ft?gt(i,e):(this._setResultAt(n,t,e,r),this._checkFullfillment()))},n.prototype._setResultAt=function(n,t,e,r){this._remaining--,this._result[t]=e},n.prototype._willSettleAt=function(n,t,e){var r=this;At(n,void 0,function(n){return r._settledAt(ct,t,n,e)},function(n){return r._settledAt(ft,t,n,e)})},n}();function xt(n,t,e){this._remaining--,this._result[t]=n===ct?{state:"fulfilled",value:e}:{state:"rejected",reason:e}}var Tt="rsvp_"+Date.now()+"-",St=0;var Ct=function(){function e(n,t){this._id=St++,this._label=t,this._state=void 0,this._result=void 0,this._subscribers=[],it.instrument&&at("created",this),st!==n&&("function"!=typeof n&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,n){var e=!1;try{n(function(n){e||(e=!0,bt(t,n))},function(n){e||(e=!0,gt(t,n))})}catch(n){gt(t,n)}}(this,n):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype._onError=function(n){var t=this;it.after(function(){t._onError&&it.trigger("error",n,t._label)})},e.prototype.catch=function(n,t){return this.then(void 0,n,t)},e.prototype.finally=function(t,n){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){throw n})},n)},e}();function kt(e,r){return{then:function(n,t){return e.call(r,n,t)}}}function zt(n,t,e,r){if(Mt(e).apply(r,t)===Pt){var i=Pt.error;Pt.error=null,gt(n,i)}return n}Ct.all=function(n,t){return Array.isArray(n)?new Et(this,n,!0,t).promise:this.reject(new TypeError("Promise.all must be called with an array"),t)},Ct.race=function(n,t){var e=new this(st,t);if(!Array.isArray(n))return gt(e,new TypeError("Promise.race must be called with an array")),e;for(var r=0;e._state===mt&&r<n.length;r++)At(this.resolve(n[r]),void 0,function(n){return bt(e,n)},function(n){return gt(e,n)});return e},Ct.resolve=lt,Ct.reject=function(n,t){var e=new this(st,t);return gt(e,n),e},Ct.prototype._guidKey=Tt,Ct.prototype.then=Ot;var It=function(r){function n(n,t,e){return function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,r.call(this,n,t,!1,e))}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,r),n}(Et);It.prototype._setResultAt=xt;var Rt=Object.prototype.hasOwnProperty,qt=function(i){function n(n,t){var e=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=arguments[3];return function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,i.call(this,n,t,e,r))}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,i),n.prototype._init=function(n,t){this._result={},this._enumerate(t),0===this._remaining&&_t(this.promise,this._result)},n.prototype._enumerate=function(n){var t=this.promise,e=[];for(var r in n)Rt.call(n,r)&&e.push({position:r,entry:n[r]});var i=e.length;this._remaining=i;for(var o=void 0,u=0;t._state===mt&&u<i;u++)o=e[u],this._eachEntry(o.entry,o.position)},n}(Et);var Ft=function(r){function n(n,t,e){return function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,r.call(this,n,t,!1,e))}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,r),n}(qt);Ft.prototype._setResultAt=xt;var Dt=function(i){function n(n,t,e,r){return function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,i.call(this,n,t,!0,r,e))}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,i),n.prototype._init=function(n,t,e,r,i){var o=t.length||0;this.length=o,this._remaining=o,this._result=new Array(o),this._mapFn=i,this._enumerate(t)},n.prototype._setResultAt=function(n,t,e,r){if(r){var i=Mt(this._mapFn)(e,t);i===Pt?this._settledAt(ft,t,i.error,!1):this._eachEntry(i,t,!1)}else this._remaining--,this._result[t]=e},n}(Et);var Nt={},Vt=function(i){function n(n,t,e,r){return function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,i.call(this,n,t,!0,r,e))}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,i),n.prototype._init=function(n,t,e,r,i){var o=t.length||0;this.length=o,this._remaining=o,this._result=new Array(o),this._filterFn=i,this._enumerate(t)},n.prototype._checkFullfillment=function(){0===this._remaining&&(this._result=this._result.filter(function(n){return n!==Nt}),_t(this.promise,this._result))},n.prototype._setResultAt=function(n,t,e,r){if(r){this._result[t]=e;var i=Mt(this._filterFn)(e,t);i===Pt?this._settledAt(ft,t,i.error,!1):this._eachEntry(i,t,!1)}else this._remaining--,e||(this._result[t]=Nt)},n}(Et);var Ut=0,Bt=void 0;function $t(n,t){Jt[Ut]=n,Jt[Ut+1]=t,2===(Ut+=2)&&oe()}var Gt="undefined"!=typeof window?window:void 0,Lt=Gt||{},Kt=Lt.MutationObserver||Lt.WebKitMutationObserver,Wt="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Yt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function Ht(){return function(){return setTimeout(Qt,1)}}var Jt=new Array(1e3);function Qt(){for(var n=0;n<Ut;n+=2){(0,Jt[n])(Jt[n+1]),Jt[n]=void 0,Jt[n+1]=void 0}Ut=0}var Xt,Zt,ne,te,ee,re,ie,oe=void 0;function ue(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}oe=Wt?(ee=process.nextTick,re=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(re)&&"0"===re[1]&&"10"===re[2]&&(ee=setImmediate),function(){return ee(Qt)}):Kt?(Zt=0,ne=new Kt(Qt),te=document.createTextNode(""),ne.observe(te,{characterData:!0}),function(){return te.data=Zt=++Zt%2}):Yt?((Xt=new MessageChannel).port1.onmessage=Qt,function(){return Xt.port2.postMessage(0)}):void 0===Gt&&"function"==typeof require?function(){try{var n=require("vertx");return void 0!==(Bt=n.runOnLoop||n.runOnContext)?function(){Bt(Qt)}:Ht()}catch(n){return Ht()}}():Ht(),it.async=$t,it.after=function(n){return setTimeout(n,0)};function ae(){it.on.apply(it,arguments)}if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var le=window.__PROMISE_INSTRUMENTATION__;for(var se in ot("instrument",!0),le)le.hasOwnProperty(se)&&ae(se,le[se])}ue(ie={asap:$t,Promise:Ct,EventTarget:rt,all:function(n,t){return Ct.all(n,t)},allSettled:function(n,t){return Array.isArray(n)?new It(Ct,n,t).promise:Ct.reject(new TypeError("Promise.allSettled must be called with an array"),t)},race:function(n,t){return Ct.race(n,t)},hash:function(n,t){return null===n||"object"!=typeof n?Ct.reject(new TypeError("Promise.hash must be called with an object"),t):new qt(Ct,n,t).promise},hashSettled:function(n,t){return null===n||"object"!=typeof n?Ct.reject(new TypeError("RSVP.hashSettled must be called with an object"),t):new Ft(Ct,n,!1,t).promise},rethrow:function(n){throw setTimeout(function(){throw n}),n},defer:function(n){var e={resolve:void 0,reject:void 0};return e.promise=new Ct(function(n,t){e.resolve=n,e.reject=t},n),e},denodeify:function(p,h){var n=function(){for(var n=arguments,t=arguments.length,e=new Array(t+1),r=!1,i=0;i<t;++i){var o=n[i];if(!r){if((r=null!==(l=o)&&"object"==typeof l&&(l.constructor===Ct||pt(l)))===Pt){var u=Pt.error;Pt.error=null;var a=new Ct(st);return gt(a,u),a}r&&!0!==r&&(o=kt(r,o))}e[i]=o}var l,s,m,c,f,P=new Ct(st);return e[t]=function(n,t){n?gt(P,n):void 0===h?bt(P,t):!0===h?bt(P,function(n){for(var t=n.length,e=new Array(t-1),r=1;r<t;r++)e[r-1]=n[r];return e}(arguments)):Array.isArray(h)?bt(P,function(n,t){for(var e={},r=n.length,i=new Array(r),o=0;o<r;o++)i[o]=n[o];for(var u=0;u<t.length;u++)e[t[u]]=i[u+1];return e}(arguments,h)):bt(P,t)},r?(s=P,m=e,c=p,f=this,Ct.all(m).then(function(n){return zt(s,n,c,f)})):zt(P,e,p,this)};return n.__proto__=p,n},configure:ot,on:ae,off:function(){it.off.apply(it,arguments)},resolve:function(n,t){return Ct.resolve(n,t)},reject:function(n,t){return Ct.reject(n,t)},map:function(n,t,e){return Array.isArray(n)?"function"!=typeof t?Ct.reject(new TypeError("RSVP.map expects a function as a second argument"),e):new Dt(Ct,n,t,e).promise:Ct.reject(new TypeError("RSVP.map must be called with an array"),e)}},"async",function(n,t){return it.async(n,t)}),ue(ie,"filter",function(n,t,e){return"function"!=typeof t?Ct.reject(new TypeError("RSVP.filter expects function as a second argument"),e):Ct.resolve(n,e).then(function(n){if(!Array.isArray(n))throw new TypeError("RSVP.filter must be called with an array");return new Vt(Ct,n,t,e).promise})});var me,ce={all:pe,find:Me},fe=function(n){var t=n[0].split(" "),e=n[1],r=n[2].split(" "),i={name:e,intervals:t,abbreviatures:r},o=function(n){return-1!==t.indexOf(n)};return i.quality=o("5A")?"Augmented":o("3M")?"Major":o("5d")?"Diminished":o("3m")?"Minor":null,i.chroma=Bn(t),i.setnum=parseInt(i.chroma,2),Object.freeze(i)},Pe=function(n,t){return(n.name||"").localeCompare(t.name)};function pe(){return me||(me=Dn.map(fe).sort(Pe))}var he=Object.freeze({intervals:[],names:[]}),de=function(n){return"string"==typeof n};function Me(t){if(!t&&""!==t)return he;de(t)?t={name:t,abbreviature:t,chroma:t}:Array.isArray(t)?t={intervals:t}:"number"==typeof t&&(t={setnum:t}),t.intervals&&(t.chroma=Bn(t.intervals));return pe().find(function(n){return de(t.name)&&t.name===n.name||de(t.abbreviature)&&-1!==n.abbreviatures.indexOf(t.abbreviature)||t.chroma&&t.chroma===n.chroma||t.setnum&&t.setnum===n.setnum})||he}var ve=Object.freeze({default:ce,all:pe,find:Me}),be={tokenize:ge,transpose:Ae,props:je,notes:Oe,intervals:we,exists:Ee,subsets:Te,supersets:xe},ye=function(n){return n.abbreviatures[0]},_e=/^(6|64|7|9|11|13)$/;function ge(n){var t=u(n);return""===t[0]?[null,n]:"A"===t[0]&&"ug"===t[3]?[null,"aug"]:_e.test(t[2])?[t[0]+t[1],t[2]+t[3]]:[t[0]+t[1]+t[2],t[3]]}function Ae(n,t){var e=ge(n),r=e[0],i=e[1];return r?En(r,t)+i:n}function je(n){var t=ge(n),e=t[0],r=Me(t[1]),i={tonic:e,notes:e?r.intervals.map(En(e)):[]};return Object.assign(i,r)}function we(n){return je(n).intervals}function Oe(n,t){return t?je(t).intervals.map(En(n)):je(n).notes}function Ee(n){return 0<je(n).intervals.length}function xe(n){var t=we(n);if(0===t.length)return[];var e=Xn(t);return pe().filter(function(n){return e(n.intervals)}).map(ye)}function Te(n){var t=Qn(we(n));return pe().filter(function(n){return t(n.intervals)}).map(ye)}var Se=Object.freeze({default:be,tokenize:ge,transpose:Ae,names:function(n){return pe.map(ye)},props:je,intervals:we,notes:Oe,exists:Ee,supersets:xe,subsets:Te}),Ce={name:Ue,names:Ve,props:Ne,decimal:$e,type:Be,name:Ue,fromDegree:Ge},ke="I II III IV V VI VII".split(" "),ze=ke.map(function(n){return n.toLowerCase()}),Ie=/^(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/,Re={name:null,type:null},qe=function(n){return!1===n?ze:ke},Fe=function(n){var t=Ie.exec(n);if(!t)return Re;var e=t[1],r=t[2],i=e.toUpperCase(),o=e===i;return{name:e,type:r,decimal:ke.indexOf(i)+1,major:o}},De={};function Ne(n){return De[n]||(De[n]=Fe(n))}function Ve(n){return qe(n).slice()}function Ue(n){return Ne(n).name}function Be(n){return Ne(n).type}function $e(n){return 0<n&&n<8?n:Ne(n).decimal||null}function Ge(n,t){return qe(t)[n-1]||null}var Le=Object.freeze({default:Ce,props:Ne,names:Ve,name:Ue,type:Be,decimal:$e,fromDegree:Ge}),Ke="major dorian phrygian lydian mixolydian minor locrian ionian aeolian".split(" "),We=[0,1,2,3,4,5,6,0,5],Ye="C D E F G A B".split(" "),He="Maj7 m7 m7 Maj7 7 m7 m7b5".split(" "),Je=[0,2,4,-1,1,3,5,0,3],Qe=function(n){return We[Ke.indexOf(n)]};function Xe(n){return!0===n?Ke.slice():Ke.slice(0,7)}function Ze(n){return xn("C",n)+" major"}function nr(n){void 0===n&&(n=4);for(var t=[],e=-(n=Math.abs(n));e<=n;e++)t.push(Ze(e));return t}var tr,er,rr=Object.freeze({name:null,tonic:null,mode:null,modenum:null,intervals:[],scale:[],alt:null,acc:null}),ir=(tr=function(n){var t=Pr(n);if(null===t[0])return rr;var e={tonic:t[0],mode:t[1]};e.name=e.tonic+" "+e.mode,e.modenum=Qe(e.mode);var r=F(e.modenum,Ye);return e.alt=Tn("C",e.tonic)-Je[Ke.indexOf(e.mode)],e.acc=E(e.alt),e.intervals=r.map(Rn(r[0])),e.scale=e.intervals.map(En(e.tonic)),Object.freeze(e)},void 0===er&&(er={}),function(n){return er[n]||(er[n]=tr(n))}),or=function(n){return ir(n).scale};function ur(n){var t=ir(n);return null===t.name?[]:F(t.modenum,He).map(function(n,t){return Ge(t+1,"m"!==n[0])})}function ar(n){var t=ir(n).alt;return null===t?null:0===t?[]:0<t?q(1,t).map(xn("B")):q(-1,t).map(xn("F"))}function lr(e,n,t){if(1===arguments.length)return function(n,t){return lr(e,n,t)};var r=ir(n);if(!r.name)return[];var i=F(r.modenum,e),o=r.scale.map(function(n,t){return n+i[t]});return t?t.map($e).map(function(n){return o[n-1]}):o}var sr=lr(He),mr=lr(["","m","m","","","m","dim"]),cr=function(n){var t=ir(n);return t.name?t.scale.map(function(n){return En(n,"P5")+"7"}):[]};function fr(t,n){if(1===arguments.length)return function(n){return fr(t,n)};var e=Qe(t.toLowerCase());if(void 0===e)return null;var r=ir(n);return null===r.name?null:xn(r.tonic,Je[e]-Je[r.modenum])+" "+t}function Pr(n){var t=u(n);return t[3]=t[3].toLowerCase(),""===t[0]||-1===Ke.indexOf(t[3])?[null,null]:[t[0]+t[1],t[3]]}var pr,hr={tokenize:Pr,modeNames:Xe,fromAlter:Ze,names:nr,props:ir,scale:or,degrees:ur,relative:fr,alteredNotes:ar,leadsheetSymbols:lr,chords:sr,triads:mr,secDomChords:cr},dr=Object.freeze({modeNames:Xe,fromAlter:Ze,names:nr,props:ir,scale:or,degrees:ur,alteredNotes:ar,leadsheetSymbols:lr,chords:sr,triads:mr,secDomChords:cr,relative:fr,tokenize:Pr,default:hr}),Mr=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 7m","whole tone"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2m 3m 3M 5d 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished"],["1P 2M 3M 4P 5P 6m 7m","melodic minor fifth mode","hindu","mixolydian b6M"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","melodic minor second mode"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major","dorian b2"],["1P 2M 3m 4P 5P 6m 7m","aeolian","minor"],["1P 2M 3m 5d 5P 6M 7m","romanian minor"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","ionian augmented"],["1P 2m 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M","chromatic"]],vr={all:_r,find:Ar},br=function(n){var t=n[0].split(" "),e={name:n[1],intervals:t,names:n.slice(1)};return e.chroma=Bn(t),e.setnum=parseInt(e.chroma,2),Object.freeze(e)},yr=function(n,t){return n.name.localeCompare(t.name)};function _r(){return pr||(pr=Mr.map(br).sort(yr))}var gr=Object.freeze({intervals:[],names:[]});function Ar(t){"string"==typeof t?t={name:t,chroma:t}:Array.isArray(t)?t={intervals:t}:"number"==typeof t&&(t={setnum:t}),t.intervals&&(t.chroma=Bn(t.intervals));return _r().find(function(n){return t.name&&-1!==n.names.indexOf(t.name)||t.chroma&&t.chroma===n.chroma||t.setnum&&t.setnum===n.setnum})||gr}var jr=Object.freeze({default:vr,all:_r,find:Ar}),wr={tokenize:Er,props:xr,names:Tr,intervals:Sr,notes:Cr,exists:kr,modeNames:zr,chords:Ir,toScale:Rr,supersets:qr,subsets:Fr},Or=function(n){return n.name};function Er(n){if("string"!=typeof n)return[null,""];var t=n.indexOf(" "),e=f(n.substring(0,t))||f(n),r=e?n.substring(e.length+1):n;return[e,r.length?r:""]}function xr(n){var t=Er(n),e=t[0],r=Ar(t[1]),i={tonic:e,notes:e?r.intervals.map(En(e)):[]};return Object.assign(i,r)}function Tr(n){return n?_r().map(function(n){return n.names}).reduce(function(n,t){return n.concat(t)}):_r().map(Or)}function Sr(n){return xr(Er(n)[1]).intervals}function Cr(n,t){var e=Er(n);return Sr(t=t||e[1]).map(En(e[0]))}function kr(n){return void 0!==Ar(Er(n)[1]).name}function zr(n){var r=Sr(n),i=Cr(n);return Ln(r).map(function(n,t){var e=Ar(n).name;if(e)return[i[t]||r[t],e]}).filter(function(n){return n})}function Ir(n){var t=Qn(Sr(n));return pe().filter(function(n){return t(n.intervals)}).map(function(n){return n.abbreviatures[0]})}function Rr(n){var t=D(n.map(P));if(!t.length)return t;var e=t[0],r=U(t);return F(r.indexOf(e),r)}function qr(n){if(!Sr(n).length)return[];var t=Xn(Sr(n));return _r().filter(function(n){return t(n.intervals)}).map(Or)}function Fr(n){var t=Qn(Sr(n));return _r().filter(function(n){return t(n.intervals)}).map(Or)}return{Array:G,Chord:Se,ChordDictionary:ve,Distance:Fn,Interval:vn,Key:dr,Note:k,Pcset:tt,RomanNumeral:Le,Scale:Object.freeze({default:wr,tokenize:Er,props:xr,names:Tr,intervals:Sr,notes:Cr,exists:kr,modeNames:zr,chords:Ir,toScale:Rr,supersets:qr,subsets:Fr}),ScaleDictionary:jr}});
//# sourceMappingURL=tonal.min.js.map
